(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{5878:function(e,t,s){Promise.resolve().then(s.bind(s,6335))},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(5250),a=s.n(r)},6335:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(3827),a=s(4090),n=s(8792),l=s(7461);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=(0,l.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var d=s(7269),o=s(8121),u=s(1221);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,l.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var x=s(6288);function m(e){let{open:t,onClose:s}=e,{user:n}=(0,d.a)(),[l,i]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),p=async e=>{if(e.preventDefault(),!n){x.toast.error("You must be signed in to create a deck");return}if(!l.trim()){x.toast.error("Please enter a title for your deck");return}g(!0);try{let e=(0,o.hJ)(u.db,"users/".concat(n.uid,"/decks"));await (0,o.ET)(e,{title:l.trim(),description:c.trim(),userId:n.uid,cards:[],createdAt:(0,o.Bt)(),updatedAt:(0,o.Bt)()}),x.toast.success("Deck created successfully!"),i(""),m(""),s()}catch(e){console.error("Error creating deck:",e),x.toast.error("Failed to create deck. Please try again.")}finally{g(!1)}};return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Create New Deck"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,r.jsx)(h,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:"Title"}),(0,r.jsx)("input",{type:"text",id:"title",value:l,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter deck title",disabled:f})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),(0,r.jsx)("textarea",{id:"description",value:c,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter deck description",rows:3,disabled:f})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:f,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Creating...":"Create Deck"})]})]})]})]}):null}function f(){let{user:e}=(0,d.a)(),{decks:t,loading:s}=function(){let{user:e}=(0,d.a)(),[t,s]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[l,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){s([]),n(!1);return}let t=(0,o.hJ)(u.db,"users/".concat(e.uid,"/decks")),r=(0,o.IO)(t,(0,o.Xo)("updatedAt","desc")),a=(0,o.cf)(r,e=>{s(e.docs.map(e=>({id:e.id,...e.data()}))),n(!1),i(null)},e=>{console.error("Error fetching decks:",e),i(e),n(!1)});return()=>a()},[e]),{decks:t,loading:r,error:l}}(),[l,h]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1),g=null==t?void 0:t.filter(e=>e.title.toLowerCase().includes(l.toLowerCase())),p=e=>e?e.toDate().toLocaleDateString():"Never";return e?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Your Flashcard Decks"}),(0,r.jsxs)("button",{onClick:()=>f(!0),className:"btn btn-primary inline-flex items-center gap-2",children:[(0,r.jsx)(i,{className:"w-4 h-4"}),"Create Deck"]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search decks...",value:l,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),s?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 rounded-lg h-40"},t))}):(null==g?void 0:g.length)===0?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"No flashcard decks found. Create your first deck to get started!"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:null==g?void 0:g.map(e=>{var t;return(0,r.jsxs)(n.default,{href:"/review/".concat(e.id),className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg hover:shadow-xl transition-shadow",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:[(null===(t=e.cards)||void 0===t?void 0:t.length)||0," cards"]}),(0,r.jsxs)("span",{children:["Last studied: ",p(e.lastStudied)]})]})]},e.id)})})]}),(0,r.jsx)(m,{open:x,onClose:()=>f(!1)})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Please sign in to view your decks"}),(0,r.jsx)(n.default,{href:"/login",className:"btn btn-primary",children:"Sign In"})]})}},7269:function(e,t,s){"use strict";s.d(t,{a:function(){return n}});var r=s(4090),a=s(1221);function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=a.I8.onAuthStateChanged(e=>{t(e),n(!1)});return()=>e()},[]),{user:e,loading:s,signInWithGoogle:async()=>{try{await (0,a.qj)()}catch(e){throw console.error("Error signing in with Google:",e),e}},signOut:async()=>{try{await a.I8.signOut()}catch(e){throw console.error("Error signing out:",e),e}}}}},1221:function(e,t,s){"use strict";s.d(t,{I8:function(){return o},Vv:function(){return h},db:function(){return u},qj:function(){return x}});var r=s(6142),a=s(7065),n=s(8121),l=s(3493),i=s(9079);let c={apiKey:i.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:i.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:i.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:i.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:i.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:i.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},d=(0,r.ZF)(c),o=(0,a.v0)(d),u=(0,n.ad)(d);(0,l.IH)(d);let h=new a.hJ,x=()=>(0,a.rh)(o,h)}},function(e){e.O(0,[358,58,308,250,475,971,69,744],function(){return e(e.s=5878)}),_N_E=e.O()}]);